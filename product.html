<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Submit Product</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:2rem}
    .form{max-width:500px;margin:0 auto}
    .form input,.form button{display:block;width:100%;padding:12px;margin:8px 0}
  </style>
</head>
<body>
  <h1>Submit a Product</h1>
  <form class="form" id="productForm" method="POST" action="/products" enctype="multipart/form-data">
    <input name="name" placeholder="Product name" required />
    <input name="price" placeholder="Price" required />
    <input type="file" name="image" accept="image/*" required />
    <button type="submit">Post product</button>
  </form>
  <script>
    document.getElementById('productForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);
      // Respect API_BASE when the page is served from Live Server
      const API_BASE = window.__API_BASE__ || '';
      const res = await fetch(API_BASE + '/products', { method: 'POST', body: data });
      const text = await res.text();
      alert(text);
    });
  </script>
</body>
</html>
